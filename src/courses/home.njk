---
layout: layouts/base.njk
pagination:
  data: coursesList
  size: 1
  alias: c
permalink: "/courses/{{ c.slug }}/index.html"
---
{% import "components/course_nav.njk" as cn %}
{{ cn.nav(c, coursesList, 'home') }}

{% if c.hero_image %}
<div class="course-hero">
  <img class="course-hero-image" src="https://drive.google.com/thumbnail?id={{ c.hero_image }}&sz=w800" alt="{{ c.title }} hero image" loading="lazy">
  <div class="course-hero-overlay"></div>
</div>
{% endif %}

<section class="space-y-6">
  <header>
    <h1 class="text-2xl md:text-3xl font-semibold">{{ c.title }}</h1>
    <p class="text-stone-600">{{ c.grade }}・{{ c.semester }}｜{{ c.unit }}｜{{ c.domain }}</p>
  </header>

  <article class="prose prose-stone max-w-none">
    <div class="mb-8">
      <h2>課程簡介</h2>
      {% if c.docs and c.docs.course_description and c.docs.course_description.content %}
        {% if c.docs.course_description.mimeType == 'application/vnd.google-apps.document' or c.docs.course_description.mimeType.startsWith('text/') %}
          <div class="course-description">{{ c.docs.course_description.content | formatGoogleDoc | safe }}</div>
        {% else %}
          <div class="whitespace-pre-wrap">{{ c.docs.course_description.content }}</div>
          <a href="{{ c.docs.course_description.downloadUrl }}" target="_blank" class="inline-flex items-center gap-2 bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700 transition-colors mt-3">
            <span>開啟完整文件</span>
          </a>
        {% endif %}
      {% else %}
        <p>{{ c.overview or '（尚未填寫）' }}</p>
      {% endif %}
    </div>

    <div class="border-t border-stone-200 pt-6">
      <h2>教師介紹</h2>
      <p>{{ c.teacher or '（尚未填寫教師介紹）' }}</p>
    </div>
  </article>
</section>

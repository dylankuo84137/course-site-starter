---
permalink: /feed.json
eleventyExcludeFromCollections: true
---
{
  "version": "https://jsonfeed.org/version/1.1",
  "title": "{{ site.title }} - Course Updates",
  "home_page_url": "{% if site.url %}{{ site.url }}{% endif %}{{ '/' | url }}",
  "feed_url": "{% if site.url %}{{ site.url }}{% endif %}{{ '/feed.json' | url }}",
  "description": "Updates and changes to Waldorf education course materials",
  "icon": "{% if site.url %}{{ site.url }}{% endif %}{{ '/favicon.ico' | url }}",
  "language": "zh-Hant",
  "items": [
    {%- for course in coursesList -%}
    {%- set hasWorkbook = materialHelpers.hasMaterial(course, 'workbook_photos') or materialHelpers.hasMaterial(course, 'workbook_pdfs') -%}
    {%- set hasPhotos = materialHelpers.hasMaterial(course, 'photos') -%}
    {%- set hasBlackboard = materialHelpers.hasMaterial(course, 'blackboard') -%}
    {%- set hasSongs = materialHelpers.hasMaterial(course, 'songs_audio') -%}
    {
      "id": "{{ ('/courses/' + course.slug + '/') | url }}",
      "url": "{% if site.url %}{{ site.url }}{% endif %}{{ ('/courses/' + course.slug + '/') | url }}",
      "title": "{{ course.title }}",
      "content_html": "<p>{{ course.overview | replace('\n', '<br>') | replace('"', '&quot;') }}</p>",
      "summary": "{{ course.grade }} - {{ course.semester }} | {{ course.unit }} | {{ course.domain }}",
      "date_published": "{{ buildTime }}",
      "date_modified": "{{ buildTime }}",
      "authors": [
        {
          "name": "{{ course.teacher }}"
        }
      ],
      "tags": {{ course.tags | json }},
      "_course_metadata": {
        "slug": "{{ course.slug }}",
        "grade": "{{ course.grade }}",
        "semester": "{{ course.semester }}",
        "unit": "{{ course.unit }}",
        "domain": "{{ course.domain }}",
        "materials": {
          "workbook": {{ hasWorkbook }},
          "photos": {{ hasPhotos }},
          "blackboard": {{ hasBlackboard }},
          "audio": {{ hasSongs }}
        }
      }
    }{{ "," if not loop.last }}
    {%- endfor -%}
  ]
}

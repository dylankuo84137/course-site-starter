{#
  Course Info Card Component
  Displays course metadata in a compact card format with optional background image
#}

{% macro card(course, currentLang, i18nData) %}
  {% import "macros/i18n.njk" as i18nMacro %}
  {% set lang = currentLang or 'zh-TW' %}
  {% set i18n = i18nData or i18n %}

  {% set courseTitle = i18nMacro.cf(course, 'title', lang) %}
  {% set courseGrade = i18nMacro.cf(course, 'grade', lang) %}
  {% set courseSemester = i18nMacro.cf(course, 'semester', lang) %}
  {% set courseUnit = i18nMacro.cf(course, 'unit', lang) %}
  {% set courseDomain = i18nMacro.cf(course, 'domain', lang) %}
  {% set courseTeacher = i18nMacro.cf(course, 'teacher', lang) %}

  {% set cardClasses = ['course-info-card'] %}
  {% if course.hero_image %}{% set cardClasses = cardClasses.concat(['course-info-card--has-hero']) %}{% endif %}
  <div class="{{ cardClasses | join(' ') }}" data-course-i18n="{{ course.i18n | json }}">
    <div class="course-info-card-inner">
      {% if course.hero_image %}
      <figure class="course-info-card-media">
        <img
          src="https://drive.google.com/thumbnail?id={{ course.hero_image }}&sz=w800"
          alt="{{ courseTitle or courseGrade }}"
          loading="lazy"
          decoding="async">
      </figure>
      {% endif %}
      <div class="course-info-card-content">
        {% if courseTitle %}
        <h3 class="course-info-title" data-i18n-course="title">{{ courseTitle }}</h3>
        {% endif %}
        <div class="course-info-rows">
          {% if courseGrade %}
          <p class="course-info-row course-info-row--grade" data-i18n-course="grade">{{ courseGrade }}</p>
          {% endif %}
          {% if courseSemester %}
          <p class="course-info-row course-info-row--semester" data-i18n-course="semester">{{ courseSemester }}</p>
          {% endif %}
          {% if courseUnit or courseDomain %}
          <p class="course-info-row course-info-row--unit-domain">
            {% if courseUnit %}
            <span data-i18n-course="unit">{{ courseUnit }}</span>
            {% endif %}
            {% if courseUnit and courseDomain %}
            <span class="course-info-separator" aria-hidden="true">ï½œ</span>
            {% endif %}
            {% if courseDomain %}
            <span data-i18n-course="domain">{{ courseDomain }}</span>
            {% endif %}
          </p>
          {% endif %}
          {% if courseTeacher %}
          <p class="course-info-row course-info-row--teacher course-info-teacher">
            <span class="course-info-teacher-label">{{ i18n[lang].course.teacher }}:</span>
            <span data-i18n-course="teacher">{{ courseTeacher }}</span>
          </p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endmacro %}
